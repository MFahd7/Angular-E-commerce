<!-- https://drive.google.com/file/d/1m17aONx-F_cUQ1B_ZaK4mv-jrCAr1iXz/view?usp=sharing -->

<div
  class="w-full bg-[#F3F4F6] rounded-xl shadow-md p-4 cursor-pointer active:scale-[95%] transition-all duration-200 group relative"
>
  <!-- Product link wrapper -->
  <div [routerLink]="['/product-details', product._id]" class="block">
    <!-- Product Image -->
    <div class="relative w-full h-48 overflow-hidden rounded-lg mb-3">
      <img
        [src]="product.imageCover"
        [alt]="product.title"
        class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"
      />
    </div>

    <!-- Category Tag -->
    <span
      class="inline-block bg-green-100 text-green-600 text-xs font-medium px-2 py-0.5 rounded-full mb-2"
    >
      {{ product.category.name }}
    </span>

    <!-- Product Title -->
    <h2
      class="text-base font-semibold capitalize mb-2 truncate text-gray-800"
      [title]="product.title"
    >
      {{ product.title }}
    </h2>

    <!-- Price & Rating -->
    <div class="flex justify-between items-center">
      <span class="text-lg font-bold text-gray-900">
        {{ product.price }} EGP
      </span>
      <span class="flex items-center text-sm text-gray-600">
        <i class="fa-solid fa-star mr-1" style="color: #FFD43B"></i>
        {{ product.ratingsAverage }}
      </span>
    </div>
  </div>

  <!-- Add to Cart Button -->
  <button
    (click)="addProductCart(product._id)"
    class="cursor-pointer w-full mt-3 bg-green-500 py-2 rounded-lg text-white font-medium opacity-0 group-hover:opacity-100 transition-all duration-300 translate-y-6 group-hover:translate-y-0 active:scale-[90%]"
  >
    {{ 'products.add' | translate }}
  </button>

  <!-- Wishlist Button -->
  <button
    (click)="toggleWishlist(product)"
    class="absolute top-3 right-3 text-gray-400 hover:text-red-500 cursor-pointer"
  >
    <i
      [class]="wishlistIds.includes(product._id) ? 'fa-solid fa-heart text-red-500 fa-xl' : 'fa-regular fa-heart fa-xl'"
    ></i>
  </button>
</div>
