import{b as E}from"./chunk-5P6WEIG4.js";import{a as N,b as d,c as I,d as M,e as V,f as _,h as $,i as A,j as L,m as j}from"./chunk-KDAZZI2D.js";import{D as P,o as T}from"./chunk-6AZ3IQKA.js";import"./chunk-OOTTVPT5.js";import"./chunk-GLXZBIO7.js";import{$ as C,Cb as w,Eb as l,Lb as m,Mb as R,Na as o,Nb as g,Ta as f,Ya as v,aa as b,ba as h,lb as c,mb as p,nb as y,ob as S,pb as k,qb as u,rb as n,sb as a,tb as x,zb as F}from"./chunk-26VLXO62.js";import"./chunk-4CLCTAJ7.js";function D(t,i){t&1&&(h(),n(0,"svg",13),x(1,"path",14)(2,"path",15),a())}function G(t,i){t&1&&(h(),n(0,"svg",13),x(1,"path",16)(2,"path",17),a())}function U(t,i){if(t&1){let e=F();x(0,"input",11),n(1,"button",12),w("click",function(){C(e);let s=l().$implicit,z=l();return b(z.togglePasswordVisibility(s))}),c(2,D,3,0,":svg:svg",13)(3,G,3,0,":svg:svg",13),a()}if(t&2){let e=l().$implicit,r=l();u("formControlName",e)("type",r.showPassword[e]?"text":"password")("id","floating_"+e),o(2),p(r.showPassword[e]?3:2)}}function B(t,i){if(t&1&&x(0,"input",7),t&2){let e=l().$implicit,r=l();u("formControlName",e)("type",r.getInputType(e))("id","floating_"+e)}}function H(t,i){if(t&1&&(n(0,"p"),m(1),a()),t&2){let e=l(2).$implicit;o(),g("",e," is required")}}function O(t,i){if(t&1&&(n(0,"p"),m(1),a()),t&2){let e=l(2).$implicit;o(),g("",e," must be at least 3 characters")}}function Z(t,i){if(t&1&&(n(0,"p"),m(1),a()),t&2){let e=l(2).$implicit;o(),g("",e," must be maximum 20 characters")}}function J(t,i){if(t&1&&(n(0,"p"),m(1),a()),t&2){let e=l(2).$implicit;o(),g("",e," must be in email format (example@email.com)")}}function K(t,i){if(t&1&&(n(0,"p"),m(1),a()),t&2){let e=l(2).$implicit;o(),g("",e," must start with a capital letter and have 5-11 letters/numbers")}}function Q(t,i){t&1&&(n(0,"p"),m(1,"Phone must start with 010, 011, 012, or 015 and be 11 digits"),a())}function W(t,i){t&1&&(n(0,"p"),m(1,"Passwords do not match"),a())}function X(t,i){if(t&1&&(n(0,"div",8),c(1,H,2,1,"p")(2,O,2,1,"p")(3,Z,2,1,"p")(4,J,2,1,"p")(5,K,2,1,"p")(6,Q,2,0,"p")(7,W,2,0,"p"),a()),t&2){let e,r=l().$implicit,s=l();o(),p((e=s.ControllerName(r))!=null&&e.getError("required")?1:(e=s.ControllerName(r))!=null&&e.getError("minlength")?2:(e=s.ControllerName(r))!=null&&e.getError("maxlength")&&r==="name"?3:(e=s.ControllerName(r))!=null&&e.getError("email")?4:(e=s.ControllerName(r))!=null&&e.getError("pattern")&&r==="password"?5:(e=s.ControllerName(r))!=null&&e.getError("pattern")&&r==="phone"?6:r==="rePassword"&&s.registerForm.hasError("misMatch")?7:-1)}}function Y(t,i){if(t&1&&(n(0,"div",5),c(1,U,4,4)(2,B,1,3,"input",7),c(3,X,8,1,"div",8),n(4,"label",9)(5,"span",10),m(6),a()()()),t&2){let e,r=i.$implicit,s=l();o(),p(r==="password"||r==="rePassword"?1:2),o(2),p(((e=s.ControllerName(r))!=null&&e.touched||(e=s.ControllerName(r))!=null&&e.dirty)&&((e=s.ControllerName(r))!=null&&e.errors||r==="rePassword"&&s.registerForm.hasError("misMatch"))?3:-1),o(),u("for","floating_"+r),o(2),R(r)}}function ee(t,i){t&1&&m(0," Processing... ")}function te(t,i){t&1&&m(0," Submit ")}var q=class t{constructor(i,e,r){this.authService=i;this.toastr=e;this.router=r}isLoading=!1;getInputType(i){return i==="rePassword"||i==="password"?"password":i==="phone"?"tel":i}register(i){this.isLoading=!0,this.authService.register(i).subscribe({next:e=>{this.isLoading=!1,console.log("registration done: ",e),localStorage.setItem("token",e.token),this.authService.decodedToken(e.token),this.toastr.success("Registration successful!","Success"),this.router.navigate(["/"])},error:e=>{this.isLoading=!1,console.log("Registration faild: ",e),e?.error?.message&&this.toastr.error(e.error.message,"Error")}})}onSubmit(){if(this.registerForm.invalid){this.registerForm.markAllAsTouched();let i=document.querySelector("form .ng-invalid");i&&(i.scrollIntoView({behavior:"smooth",block:"center"}),i.focus())}else{let i=this.registerForm.value;this.register(i)}}arrOfInputs=["name","email","password","rePassword","phone"];registerForm=new V({name:new _("",[d.required,d.minLength(3),d.maxLength(20)]),email:new _("",[d.required,d.email]),password:new _("",[d.required,d.pattern(/^[A-Z][a-z0-9]{5,11}$/),d.maxLength(12)]),rePassword:new _("",[d.required]),phone:new _("",[d.required,d.pattern(/^01[0125][0-9]{8}$/)])},{validators:this.matchPasswordValid});matchPasswordValid(i){let e=i.get("password")?.value,r=i.get("rePassword")?.value;return e===r?null:{misMatch:{passwordValue:e,rePasswordValue:r}}}ControllerName(i){return this.registerForm.get(i)}get passwordMismatch(){return!!this.registerForm.errors?.misMatch}showPassword={};togglePasswordVisibility(i){this.showPassword[i]=!this.showPassword[i]}static \u0275fac=function(e){return new(e||t)(f(E),f(P),f(T))};static \u0275cmp=v({type:t,selectors:[["app-register"]],decls:12,vars:3,consts:[[1,"py-10","flex","items-center","justify-center",2,"background-image","url('/images/shopping-cart-with-presents.webp')","background-position","center","background-size","cover"],[1,"bg-white","rounded-lg","shadow-md","shadow-black","py-6","px-4","sm:px-6","md:px-8","w-11/12","sm:w-3/4","md:w-2/3","lg:w-1/2","xl:w-1/3"],[1,"text-2xl","sm:text-3xl","md:text-4xl","text-main","text-center","mb-2.5"],[1,"text-sm","text-gray-500","text-center","mb-2.5"],[1,"w-full",3,"ngSubmit","formGroup"],[1,"relative","z-0","w-full","mb-5","group"],["type","submit",1,"text-white","bg-main","hover:bg-transparent","hover:border","hover:border-main","hover:text-main","font-medium","rounded-lg","text-sm","w-full","px-5","py-2.5","text-center","active:scale-95","transition-transform","duration-100","cursor-pointer","disabled:bg-gray-400","disabled:text-gray-200","disabled:border-gray-400","disabled:cursor-not-allowed","disabled:opacity-70",3,"disabled"],["placeholder"," ",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-gray-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-main","peer",3,"formControlName","type","id"],[1,"p-4","my-2","text-sm","text-red-800","rounded-lg","bg-red-50","dark:bg-gray-800","dark:text-red-400"],[1,"absolute","text-sm","text-gray-500","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6","peer-focus:text-main",3,"for"],[1,"capitalize"],["placeholder"," ",1,"block","py-2.5","px-0","w-full","pr-10","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-gray-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-main","peer",3,"formControlName","type","id"],["type","button",1,"absolute","right-2","top-3","text-gray-500","hover:text-main","transition",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d",`M2.458 12C3.732 7.943 7.523 5 
                       12 5c4.478 0 8.268 2.943 
                       9.542 7-1.274 4.057-5.064 7-9.542 
                       7-4.477 0-8.268-2.943-9.542-7z`],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d",`M13.875 18.825A10.05 10.05 0 
                       0112 19c-4.478 0-8.268-2.943-9.542-7
                       a9.956 9.956 0 012.642-4.362m3.566-2.26
                       A9.956 9.956 0 0112 5c4.478 0 
                       8.268 2.943 9.542 7a9.956 9.956 
                       0 01-1.249 2.592M15 12a3 3 0 
                       11-6 0 3 3 0 016 0z`],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 3l18 18"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"div",1)(2,"h1",2),m(3,"Register Now"),a(),n(4,"p",3),m(5," Please fill in the form to create an account. "),a(),n(6,"form",4),w("ngSubmit",function(){return r.onSubmit()}),S(7,Y,7,4,"div",5,y),n(9,"button",6),c(10,ee,1,0)(11,te,1,0),a()()()()),e&2&&(o(6),u("formGroup",r.registerForm),o(),k(r.arrOfInputs),o(2),u("disabled",r.isLoading),o(),p(r.isLoading?10:11))},dependencies:[j,$,N,I,M,A,L],encapsulation:2})};export{q as Register};
