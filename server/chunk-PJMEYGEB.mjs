import './polyfills.server.mjs';
import{a as I}from"./chunk-LZCX3KTZ.mjs";import{a as b}from"./chunk-WJP3RJ5Y.mjs";import{N as _,z as S}from"./chunk-LS767KBO.mjs";import{$a as v,Hb as u,Na as m,Pb as h,Qa as r,Qb as o,Rb as f,Sb as p,Wa as c,Yb as g,vb as d,wb as s,xb as a,yb as l}from"./chunk-6ZIBNF5F.mjs";var P=n=>["/product-details",n],w=class n{constructor(i,e,t){this.cartService=i;this.toastr=e;this.wishlistService=t}product;wishlistIds=[];addProductCart(i){this.cartService.addToCart(i).subscribe({next:e=>{this.toastr.success(e.message)},error:e=>{this.toastr.error(e.message)}})}ngOnInit(){this.loadWishlist()}loadWishlist(){this.wishlistService.getWishlist().subscribe(i=>{this.wishlistIds=i.data.map(e=>e._id)})}toggleWishlist(i){this.wishlistIds.includes(i._id)?this.wishlistService.removeFromWishlist(i._id).subscribe(()=>{this.wishlistIds=this.wishlistIds.filter(e=>e!==i._id)}):this.wishlistService.addToWishlist(i._id).subscribe(()=>{this.wishlistIds.push(i._id)})}static \u0275fac=function(e){return new(e||n)(c(b),c(_),c(I))};static \u0275cmp=v({type:n,selectors:[["app-product-card"]],inputs:{product:"product"},decls:17,vars:12,consts:[[1,"w-full","cursor-pointer","active:scale-[93%]","transition-all","duration-150","group","relative"],[3,"routerLink"],[3,"src","alt"],[1,"text-green-500","text-sm"],[1,"text-lg","capitalize","mb-2","truncate",3,"title"],[1,"flex","justify-between","items-center"],[1,"text-black/75"],[1,"fa-solid","fa-star",2,"color","#ffd43b"],[1,"w-full","bg-green-500","py-1.5","rounded","text-white","opacity-0","group-hover:opacity-100","transition-all","duration-300","translate-y-8","active:scale-[83%]","group-hover:translate-0","cursor-pointer",3,"click"],[1,"absolute","top-2","right-2","text-gray-400","hover:text-red-500","cursor-pointer",3,"click"]],template:function(e,t){e&1&&(s(0,"div",0)(1,"div",1),l(2,"img",2),s(3,"span",3),o(4),a(),s(5,"h2",4),o(6),a(),s(7,"div",5)(8,"span"),o(9),a(),s(10,"span",6),l(11,"i",7),o(12),a()()(),s(13,"button",8),u("click",function(){return t.addProductCart(t.product._id)}),o(14," Add to Cart "),a(),s(15,"button",9),u("click",function(){return t.toggleWishlist(t.product)}),l(16,"i"),a()()),e&2&&(r(),d("routerLink",g(10,P,t.product._id)),r(),d("src",t.product.imageCover,m)("alt",t.product.title),r(2),f(t.product.category.name),r(),d("title",t.product.title),r(),p(" ",t.product.title," "),r(3),p("",t.product.price," EGP"),r(3),p(" ",t.product.ratingsAverage," "),r(4),h(t.wishlistIds.includes(t.product._id)?"fa-solid fa-heart text-red-500 fa-xl":"fa-regular fa-heart fa-xl"))},dependencies:[S],encapsulation:2})};export{w as a};
