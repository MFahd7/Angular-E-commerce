import './polyfills.server.mjs';
import{a as S,b as y}from"./chunk-RCV55B7L.mjs";import{a as C,b as c,c as L,d as E,e as T,f as x,h as F,i as P,j as N,m as j}from"./chunk-3MY3KGE4.mjs";import{N as k,y as b}from"./chunk-LS767KBO.mjs";import"./chunk-WNMICDXF.mjs";import"./chunk-K2WWLYW6.mjs";import{$a as w,Hb as _,Jb as v,Qa as l,Qb as a,Wa as p,ba as h,qb as d,rb as m,vb as f,wb as i,xb as r,yb as u}from"./chunk-6ZIBNF5F.mjs";import"./chunk-X2SEQXRR.mjs";function M(e,n){e&1&&(i(0,"p"),a(1,"Email is required"),r())}function z(e,n){e&1&&(i(0,"p"),a(1,"Invalid email format (example@email.com)"),r())}function D(e,n){if(e&1&&(i(0,"div",7),d(1,M,2,0,"p")(2,z,2,0,"p"),r()),e&2){let t,o=v();l(),m((t=o.loginForm.get("email"))!=null&&t.getError("required")?1:(t=o.loginForm.get("email"))!=null&&t.getError("email")?2:-1)}}function G(e,n){e&1&&(h(),i(0,"svg",11),u(1,"path",15)(2,"path",16),r())}function I(e,n){e&1&&(h(),i(0,"svg",11),u(1,"path",17)(2,"path",18),r())}function R(e,n){e&1&&(i(0,"p"),a(1,"Password is required"),r())}function V(e,n){e&1&&(i(0,"p"),a(1,"Password must be at least 6 characters"),r())}function q(e,n){e&1&&(i(0,"p"),a(1,"Password must start with a capital letter first and have 5-11 letters or numbers"),r())}function U(e,n){if(e&1&&(i(0,"div",7),d(1,R,2,0,"p")(2,V,2,0,"p")(3,q,2,0,"p"),r()),e&2){let t,o=v();l(),m((t=o.loginForm.get("password"))!=null&&t.getError("required")?1:(t=o.loginForm.get("password"))!=null&&t.getError("minlength")?2:3)}}function B(e,n){e&1&&a(0," Processing... ")}function Z(e,n){e&1&&a(0," Login ")}var A=class e{constructor(n,t,o,s){this.authService=n;this.toastr=t;this.router=o;this.cookieService=s}isLoading=!1;login(n){this.isLoading=!0,this.authService.Login(n).subscribe({next:t=>{this.isLoading=!1,this.authService.saveToken(t.token),localStorage.setItem("token",t.token),this.authService.decodedToken(t.token),this.toastr.success("login successful!","Success"),this.router.navigate(["/"])},error:t=>{this.isLoading=!1,console.log("login faild: ",t),t?.error?.message&&this.toastr.error(t.error.message,"Error")}})}onSubmit(){if(this.loginForm.invalid)this.loginForm.markAllAsTouched();else{let n=this.loginForm.value;this.login(n)}}loginForm=new T({email:new x("",[c.required,c.email]),password:new x("",[c.required,c.pattern(/^[A-Z][a-z0-9]{5,11}$/),c.maxLength(12)])});showPassword=!1;togglePasswordVisibility(){this.showPassword=!this.showPassword}goToReset(){this.router.navigate(["/reset-password"])}static \u0275fac=function(t){return new(t||e)(p(y),p(k),p(b),p(S))};static \u0275cmp=w({type:e,selectors:[["app-login"]],decls:25,vars:7,consts:[[1,"py-10","flex","items-center","justify-center",2,"background-image","url('/images/shopping-cart-with-presents.webp')","background-position","center","background-size","cover"],[1,"bg-white","rounded-lg","shadow-md","shadow-black","py-6","px-4","sm:px-6","md:px-8","w-11/12","sm:w-3/4","md:w-2/3","lg:w-1/2","xl:w-1/3"],[1,"text-2xl","sm:text-3xl","md:text-4xl","text-main","text-center","mb-2.5"],[1,"text-sm","text-gray-500","text-center","mb-2.5"],[1,"w-full",3,"ngSubmit","formGroup"],[1,"relative","z-0","w-full","mb-5","group"],["formControlName","email","type","email","id","floating_email","placeholder"," ",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-gray-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-main","peer"],[1,"p-4","my-2","text-sm","text-red-800","rounded-lg","bg-red-50","dark:bg-gray-800","dark:text-red-400"],["for","floating_email",1,"absolute","text-sm","text-gray-500","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6","peer-focus:text-main"],["formControlName","password","id","floating_password","placeholder"," ",1,"block","py-2.5","px-0","w-full","pr-10","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-gray-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-main","peer",3,"type"],["type","button",1,"absolute","right-2","top-3","text-gray-500","hover:text-main","transition",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5"],["for","floating_password",1,"absolute","text-sm","text-gray-500","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6","peer-focus:text-main"],[1,"text-green-500","text-sm","mb-3","cursor-pointer","hover:underline",3,"click"],["type","submit",1,"text-white","bg-main","hover:bg-transparent","hover:border","hover:border-main","hover:text-main","font-medium","rounded-lg","text-sm","w-full","px-5","py-2.5","text-center","active:scale-95","transition-transform","duration-100","cursor-pointer","disabled:bg-gray-400","disabled:text-gray-200","disabled:border-gray-400","disabled:cursor-not-allowed","disabled:opacity-70",3,"disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d",`M2.458 12C3.732 7.943 7.523 5 12 5c4.478 
                 0 8.268 2.943 9.542 7-1.274 
                 4.057-5.064 7-9.542 7-4.477 
                 0-8.268-2.943-9.542-7z`],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d",`M13.875 18.825A10.05 10.05 0 
                 0112 19c-4.478 0-8.268-2.943-9.542-7
                 a9.956 9.956 0 012.642-4.362m3.566-2.26
                 A9.956 9.956 0 0112 5c4.478 0 
                 8.268 2.943 9.542 7a9.956 9.956 
                 0 01-1.249 2.592M15 12a3 3 0 
                 11-6 0 3 3 0 016 0z`],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 3l18 18"]],template:function(t,o){if(t&1&&(i(0,"div",0)(1,"div",1)(2,"h1",2),a(3," Login Now "),r(),i(4,"p",3),a(5," Please enter your email and password to access your account. "),r(),i(6,"form",4),_("ngSubmit",function(){return o.onSubmit()}),i(7,"div",5),u(8,"input",6),d(9,D,3,1,"div",7),i(10,"label",8),a(11," Email "),r()(),i(12,"div",5),u(13,"input",9),i(14,"button",10),_("click",function(){return o.togglePasswordVisibility()}),d(15,G,3,0,":svg:svg",11)(16,I,3,0,":svg:svg",11),r(),d(17,U,4,1,"div",7),i(18,"label",12),a(19," Password "),r()(),i(20,"p",13),_("click",function(){return o.goToReset()}),a(21," Forgot your password? "),r(),i(22,"button",14),d(23,B,1,0)(24,Z,1,0),r()()()()),t&2){let s,g;l(6),f("formGroup",o.loginForm),l(3),m((s=o.loginForm.get("email"))!=null&&s.touched&&((s=o.loginForm.get("email"))!=null&&s.errors)?9:-1),l(4),f("type",o.showPassword?"text":"password"),l(2),m(o.showPassword?16:15),l(2),m((g=o.loginForm.get("password"))!=null&&g.touched&&((g=o.loginForm.get("password"))!=null&&g.errors)?17:-1),l(5),f("disabled",o.isLoading),l(),m(o.isLoading?23:24)}},dependencies:[j,F,C,L,E,P,N],encapsulation:2})};export{A as Login};
